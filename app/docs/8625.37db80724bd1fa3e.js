"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8625],{8625:(yt,x,s)=>{s.r(x),s.d(x,{SurveyUserModule:()=>ht});var a=s(4032),A=s(8772),v=s(9638),T=s(1561),C=s(1379),Z=s(3704),F=s(4756),b=s(8659),d=s(3331),Q=s(7406),I=s(3319),U=s(827),f=s(3556),Y=s(8033),O=s(2094),R=s(3911),B=s(2940),L=s(7853),k=s(4466),J=s(4639),D=s(5184),N=s(3538),M=s(1637),w=s(5507),E=s(4536),$=s(7775),p=s(8023),m=s(3528),t=s(4537),j=s(5450),z=s(8951),g=s(9472),y=s(5531),l=s(8692),P=s(9602);const W=function(n,i){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":n,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":i}};function K(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"fuse-card",10)(2,"div",11)(3,"div",12)(4,"span",13),t._uU(5),t.ALo(6,"titlecase"),t.qZA()()(),t.TgZ(7,"div",14)(8,"div",15),t._uU(9),t.qZA()(),t.TgZ(10,"div",16)(11,"div",17),t._UZ(12,"mat-icon",18),t.TgZ(13,"div",19),t._uU(14),t.ALo(15,"date"),t.ALo(16,"date"),t.qZA()()(),t.TgZ(17,"div",20)(18,"a",21)(19,"span",22)(20,"span"),t._uU(21,"Isi Survey"),t.qZA()()()()(),t.BQk()),2&n){const e=i.$implicit;t.xp6(3),t.Q6J("ngClass",t.WLB(15,W,"LAYANAN_PEMBINAAN_JFP"===e.surveyType,"PELAKSANAAN_KEGIATAN"===e.surveyType)),t.xp6(2),t.Oqu(t.lcZ(6,7,e.surveyType)),t.xp6(4),t.Oqu(e.title),t.xp6(3),t.Q6J("svgIcon","heroicons_solid:calendar"),t.xp6(2),t.AsE("",t.xi3(15,9,e.startDate,"d/M/yyyy")," - ",t.xi3(16,12,e.endDate,"d/M/yyyy"),""),t.xp6(4),t.Q6J("routerLink","start/"+e.hash)}}function G(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",8),t.YNc(2,K,22,18,"ng-container",9),t.qZA(),t.BQk()),2&n){const e=t.oxw().ngIf,o=t.oxw();t.xp6(2),t.Q6J("ngForOf",e)("ngForTrackBy",o.trackByFn)}}function H(n,i){if(1&n&&(t.ynx(0),t.YNc(1,G,3,2,"ng-container",7),t.BQk()),2&n){const e=i.ngIf;t.oxw();const o=t.MAs(9);t.xp6(1),t.Q6J("ngIf",e.length)("ngIfElse",o)}}function X(n,i){1&n&&(t.TgZ(0,"div",23),t._UZ(1,"mat-icon",24),t.TgZ(2,"div",25),t._uU(3,"Survey tidak ditemukan! "),t.qZA()()),2&n&&(t.xp6(1),t.Q6J("svgIcon","heroicons_outline:document-search"))}let V=(()=>{class n{constructor(e,o,r,c){this._referensiService=e,this._authService=o,this._changeDetectorRef=r,this._surveyService=c,this.groupDiklatList=this._referensiService.groupDiklat(),this.topicDiklatList=this._referensiService.groupTopic(),this.role=this._authService.role,this.filters={filters:{byTitle:null,byStatus:null,byCategoryId:null,byType:null}},this._unsubscribeAll=new p.x}ngOnInit(){this.fetch(),this.items$=this._surveyService.items$}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}fetch(){this._surveyService.getListByMe().pipe((0,m.R)(this._unsubscribeAll)).subscribe(),this.items$=this._surveyService.items$,this._changeDetectorRef.markForCheck()}toggleShowMode(e=null){this.show=null===e?!this.show:e,this._changeDetectorRef.markForCheck()}trackByFn(e,o){return o.id||e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(j.A2),t.Y36(z.e),t.Y36(t.sBO),t.Y36(g.F))},n.\u0275cmp=t.Xpm({type:n,selectors:[["diklat-list"]],decls:10,vars:3,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","w-full","mx-auto"],[1,"flex","flex-col","sm:flex-row","items-center","justify-between","w-full","max-w-xs","sm:max-w-none"],[1,"text-2xl","font-extrabold","tracking-tight","leading-none","mr-10"],[4,"ngIf"],["noitems",""],[4,"ngIf","ngIfElse"],[1,"grid","grid-cols-2","sm:grid-cols-2","lg:grid-cols-3","gap-8","mt-8","sm:mt-10"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"flex","flex-col","shadow","rounded-2xl","overflow-hidden","bg-card"],[1,"flex","items-center","mx-3","sm:mx-5","m-6"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide",3,"ngClass"],[1,"leading-relaxed","whitespace-nowrap","text-sm"],[1,"sm:mx-5","mb-4"],[1,"text-1xl","font-semibold","leading-tight"],[1,"flex","items-center","mx-3","sm:mx-5","mb-5"],[1,"ml-3","flex","items-center","leading-5","text-md","text-secondary"],[1,"icon-size-5","text-hint",3,"svgIcon"],[1,"ml-1.5"],[1,"px-6","py-4","text-right","bg-gray-50","dark:bg-transparent"],["mat-stroked-button","",3,"routerLink"],[1,"inline-flex","items-center"],[1,"flex","flex-auto","flex-col","items-center","justify-center","bg-gray-100","dark:bg-transparent"],[1,"icon-size-24",3,"svgIcon"],[1,"mt-6","text-2xl","font-semibold","tracking-tight","text-secondary"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"Survey"),t.qZA()(),t.YNc(6,H,2,2,"ng-container",5),t.ALo(7,"async"),t.YNc(8,X,4,1,"ng-template",null,6,t.W1O),t.qZA()()()),2&e&&(t.xp6(6),t.Q6J("ngIf",t.lcZ(7,1,o.items$)))},dependencies:[a.yS,v.zs,y.PQ,d.Hw,l.mk,l.sg,l.O5,P.y,l.Ov,l.rS,l.uU],encapsulation:2,changeDetection:0}),n})();var q=s(2516),_=s(5804),tt=s(5020);let et=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,o){1&e&&t._UZ(0,"router-outlet")},dependencies:[a.lC],encapsulation:2,changeDetection:0}),n})();var S=s(8292),nt=s(1822),st=s(92),ot=s(2494);function it(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.TgZ(1,"mat-radio-button",11),t.NdJ("change",function(r){t.CHM(e);const c=t.oxw(2).$implicit,u=t.oxw(2);return t.KtG(u.save(r,c.question.questionId))}),t._uU(2),t.qZA(),t.BQk()}if(2&n){const e=i.$implicit;t.xp6(1),t.Q6J("value",e.id)("checked",e.isAnswer),t.xp6(1),t.Oqu(e.label)}}function rt(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",9)(2,"mat-radio-group"),t.YNc(3,it,3,3,"ng-container",10),t.qZA()(),t.BQk()),2&n){const e=t.oxw().$implicit;t.xp6(3),t.Q6J("ngForOf",e.question.options)}}function ct(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"div",5)(2,"div",6)(3,"span"),t._uU(4),t.qZA(),t._uU(5),t.qZA(),t.TgZ(6,"div",7),t.YNc(7,rt,4,1,"ng-container",8),t.qZA()(),t.BQk()),2&n){const e=i.$implicit,o=i.index;t.xp6(4),t.hij("",o+1,")."),t.xp6(1),t.hij(" ",e.question.questionText,""),t.xp6(2),t.Q6J("ngIf",e.question.isOption)}}function lt(n,i){if(1&n){const e=t.EpF();t.ynx(0),t.YNc(1,ct,8,3,"ng-container",2),t.TgZ(2,"button",3),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.end())}),t.TgZ(3,"span",4),t._uU(4,"Selesai"),t.qZA()(),t.BQk()}if(2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.questions)("ngForTrackBy",e.trackByFn),t.xp6(1),t.Q6J("color","primary")}}function at(n,i){1&n&&(t.TgZ(0,"div",12)(1,"div",7)(2,"fuse-alert",13)(3,"div",14),t._uU(4,"Pertanyaan survey tidak ditemukan"),t.qZA()()()()),2&n&&(t.xp6(2),t.Q6J("type","info"))}let ut=(()=>{class n{constructor(e,o,r,c,u,h,xt){this.diklatService=e,this.surveyService=o,this._changeDetectorRef=r,this.fb=c,this._toastr=u,this.activeRoute=h,this.route=xt,this.questionAnswer=[],this.isTestActive=!0,this._unsubscribeAll=new p.x}ngOnInit(){this.questions=this.item.questionFeedbacks}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}end(){this.surveyService.endSurvey({hash:this.activeRoute.snapshot.url[1].path}).pipe((0,m.R)(this._unsubscribeAll)).subscribe(o=>{o.success?(this._toastr.success("Survey telah disubmit"),this._changeDetectorRef.markForCheck(),this.route.navigate(["/survey-user"])):this._toastr.error(o?.message,"ERROR")})}save(e,o){this.surveyService.answerSurvey({hash:this.activeRoute.snapshot.url[1].path,questionId:o,answer:null,optionAnswer:[e.value]}).pipe((0,m.R)(this._unsubscribeAll)).subscribe(c=>{c.success?(this._toastr.success("Jawaban berhasil disimpan"),this._changeDetectorRef.markForCheck()):this._toastr.error(c?.message,"ERROR")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(nt.c),t.Y36(g.F),t.Y36(t.sBO),t.Y36(st.qu),t.Y36(S._W),t.Y36(a.gz),t.Y36(a.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-widget-survey-question"]],inputs:{item:"item"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["noQuestion",""],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-flat-button","",1,"sm:mt-0","sm:ml-auto",3,"color","click"],[1,"ml-2","mr-1"],[1,"flex","flex-col","items-start","mb-3","p-5","space-y-3","shadow","rounded-lg","overflow-hidden","bg-card","cursor-pointer"],[1,"text-lg","font-medium","leading-5","w-full"],[1,"w-full"],[4,"ngIf"],[1,"space-y-1.5"],[4,"ngFor","ngForOf"],[1,"flex","my-1",3,"value","checked","change"],[1,"grid","grid-cols-1","gap-3"],[1,"mb-5",3,"type"],[1,"text-md"]],template:function(e,o){if(1&e&&(t.YNc(0,lt,5,3,"ng-container",0),t.YNc(1,at,5,1,"ng-template",null,1,t.W1O)),2&e){const r=t.MAs(2);t.Q6J("ngIf",o.questions)("ngIfElse",r)}},dependencies:[l.sg,l.O5,v.lW,ot.W,f.VQ,f.U0],encapsulation:2,changeDetection:0}),n})();const mt=function(){return["/survey-user"]};let gt=(()=>{class n{constructor(e,o,r,c,u,h){this._document=e,this.route=o,this._elementRef=r,this._surveyService=c,this._changeDetectorRef=u,this._toastr=h,this._unsubscribeAll=new p.x}ngOnInit(){this.fetch()}fetch(){this._surveyService.item$.pipe((0,m.R)(this._unsubscribeAll)).subscribe(e=>{console.log("====>",e),this._item=e,this._changeDetectorRef.markForCheck()})}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}trackByFn(e,o){return o.id||e}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.K0),t.Y36(a.gz),t.Y36(t.SBq),t.Y36(g.F),t.Y36(t.sBO),t.Y36(S._W))},n.\u0275cmp=t.Xpm({type:n,selectors:[["ng-component"]],decls:15,vars:5,consts:[["cdkScrollable","",1,"absolute","inset-0","flex","flex-col","min-w-0","overflow-y-auto"],[1,"flex","flex-auto","p-6","sm:p-10"],[1,"flex","flex-col","flex-auto","w-full","mx-auto"],[1,"flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","dark:bg-transparent"],[1,"flex-1","min-w-0"],[1,"flex","flex-wrap","items-center","font-medium"],[1,"inline-flex","items-center","leading-6","text-primary","hover:underline",3,"routerLink"],[1,"inline-flex","items-center"],[1,"icon-size-5","text-current",3,"svgIcon"],[1,"ml-1.5","font-medium","leading-5"],[1,"flex","flex-col","w-full","mt-5"],[1,"mx-6","sm:mx-8","mt-2","mb-6"],[3,"item"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div")(7,"a",6)(8,"span",7),t._UZ(9,"mat-icon",8),t.TgZ(10,"span",9),t._uU(11),t.qZA()()()()()()(),t.TgZ(12,"div",10)(13,"div",11),t._UZ(14,"app-widget-survey-question",12),t.qZA()()()()()),2&e&&(t.xp6(7),t.Q6J("routerLink",t.DdM(4,mt)),t.xp6(2),t.Q6J("svgIcon","heroicons_solid:arrow-sm-left"),t.xp6(2),t.Oqu(o._item.title),t.xp6(3),t.Q6J("item",o._item))},dependencies:[a.yS,y.PQ,d.Hw,ut],encapsulation:2,changeDetection:0}),n})();var vt=s(8606),dt=s(3568),ft=s(3787);let pt=(()=>{class n{constructor(e,o){this._surveyService=e,this._router=o}resolve(e,o){return this._surveyService.start(e.paramMap.get("id")).pipe((0,dt.K)(r=>{console.error(r);const c=o.url.split("/").slice(0,-1).join("/");return this._router.navigateByUrl(c),(0,ft._)(r)}))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(g.F),t.LFG(a.F0))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ht=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[a.Bz.forChild([{path:"",component:et,children:[{path:"",pathMatch:"full",component:V},{path:"start/:id",component:gt,resolve:{courses:pt}}]}]),tt.fi.forRoot(),v.ot,J.rP,T.p9,Z.FA,F.t,b.lN,d.Ps,Q.c,I.Tx,A.Yd,U.Cv,f.Fk,C.si,Y.LD,O.SJ,R.p0,B.AV,N.TU,M.Bb,L.V,q.Nh,k.m,E.Is,D.p,$.fC,_.J,vt.H,w.yI.forRoot()]}),n})()}}]);