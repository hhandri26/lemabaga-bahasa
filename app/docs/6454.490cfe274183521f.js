"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[6454],{6454:(pn,p,a)=>{a.r(p),a.d(p,{UndanganKegiatanUserModule:()=>dn});var g=a(8692),h=a(4032),x=a(9638),d=a(1379),v=a(3331),Z=a(3319),b=a(827),A=a(6558),u=a(3911),T=a(4466),C=a(2516),k=a(8659),I=a(2940),_=a(8772),K=a(1561),L=a(3704),U=a(4536),D=a(7406),y=a(3538),S=a(8033),R=a(4639),w=a(7775),F=a(8023),f=a(3528),N=a(8288),n=a(4537),B=a(2575),J=a(1683),O=a(8292),c=a(92),Q=a(5450),M=a(8951),Y=a(7495),E=a(2494),j=a(7269);const z=["paginatorUndangan"];function G(e,s){1&e&&(n.TgZ(0,"div",18),n._UZ(1,"mat-progress-bar",19),n.qZA()),2&e&&(n.xp6(1),n.Q6J("mode","indeterminate"))}function H(e,s){if(1&e&&(n.ynx(0),n._uU(1),n.ALo(2,"number"),n.BQk()),2&e){const t=n.oxw();n.xp6(1),n.hij("",n.lcZ(2,1,null==t.pagination?null:t.pagination.recordsTotal),"\xa0Kegiatan ")}}function $(e,s){if(1&e&&(n.ynx(0),n.TgZ(1,"mat-option",20),n._uU(2),n.qZA(),n.BQk()),2&e){const t=s.$implicit;n.xp6(1),n.Q6J("value",t.id),n.xp6(1),n.hij(" ",t.name," ")}}function P(e,s){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"button",42),n.NdJ("click",function(){n.CHM(t);const o=n.oxw().$implicit,r=n.oxw(4);return n.KtG(r.toggleConfirm(o))}),n.TgZ(2,"span",43),n._uU(3,"Konfirmasi"),n.qZA()(),n.BQk()}2&e&&(n.xp6(1),n.Q6J("color","warn"))}const V=function(e,s,t,i,o,r){return{"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":e,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-50":s,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":t,"bg-green-200 text-green-800 dark:bg-green-600 dark:text-green-50":i,"bg-red-200 text-red-800 dark:bg-red-600 dark:text-red-50":o,"bg-yellow-200 text-yellow-800 dark:bg-yellow-600 dark:text-yellow-50":r}};function W(e,s){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",29)(2,"div",24)(3,"div",30),n._uU(4),n.ALo(5,"titlecase"),n.qZA(),n.TgZ(6,"div",31)(7,"div",32)(8,"div",33)(9,"span",34),n._uU(10),n.ALo(11,"titlecase"),n.ALo(12,"replace"),n.qZA()(),n.TgZ(13,"div",35),n._uU(14,"\u2022"),n.qZA(),n.TgZ(15,"div",36),n._UZ(16,"mat-icon",37),n._uU(17),n.ALo(18,"titlecase"),n.qZA(),n.TgZ(19,"div",35),n._uU(20,"\u2022"),n.qZA(),n.TgZ(21,"div",36),n._UZ(22,"mat-icon",38),n.TgZ(23,"button",39),n.NdJ("click",function(){const r=n.CHM(t).$implicit,l=n.oxw(4);return n.KtG(l.toggleOpenFile(r.kegiatanSimpleDto.fileUndanganUrl))}),n._uU(24,"Undangan"),n.qZA()()()()(),n.TgZ(25,"div",25)(26,"div",30),n._uU(27),n.qZA(),n.TgZ(28,"div",40),n._uU(29),n.qZA()(),n.TgZ(30,"div",26)(31,"span",41)(32,"span",34),n._uU(33),n.ALo(34,"titlecase"),n.ALo(35,"replace"),n.qZA()()(),n.TgZ(36,"div",27),n.YNc(37,P,4,1,"ng-container",5),n.qZA()(),n.BQk()}if(2&e){const t=s.$implicit;n.xp6(4),n.hij(" ",n.lcZ(5,9,t.kegiatanSimpleDto.judul),""),n.xp6(6),n.Oqu(n.lcZ(11,11,n.Dn7(12,13,t.kegiatanSimpleDto.jenisKegiatan,"_"," "))),n.xp6(7),n.hij(" ",n.lcZ(18,17,t.kegiatanSimpleDto.lokasi)," "),n.xp6(10),n.AsE(" ",t.kegiatanSimpleDto.tglMulai," - ",t.kegiatanSimpleDto.tglAkhir," "),n.xp6(2),n.hij("Batas Konfirmasi : ",t.kegiatanSimpleDto.deadlineKonfirmasi," "),n.xp6(2),n.Q6J("ngClass",n.HTZ(25,V,"MENUNGGU_KONFIRMASI"===t.statusKonfirmasiUndangan,"KONFIRMASI_TIDAK_HADIR"===t.statusKonfirmasiUndangan,"KONFIRMASI_AKAN_HADIR"===t.statusKonfirmasiUndangan,"KONFIRMASI_DISETUJUI"===t.statusKonfirmasiUndangan,"KONFIRMASI_DITOLAK"===t.statusKonfirmasiUndangan,"TIDAK_PERLU_KONFIRMASI"===t.statusKonfirmasiUndangan)),n.xp6(2),n.Oqu(n.lcZ(34,19,n.Dn7(35,21,t.statusKonfirmasiUndangan,"_"," "))),n.xp6(4),n.Q6J("ngIf","MENUNGGU_KONFIRMASI"===t.statusKonfirmasiUndangan)}}function X(e,s){if(1&e&&(n.ynx(0),n.YNc(1,W,38,32,"ng-container",12),n.BQk()),2&e){const t=s.ngIf,i=n.oxw(3);n.xp6(1),n.Q6J("ngForOf",t)("ngForTrackBy",i.trackByFn)}}const q=function(e){return{"pointer-events-none":e}},nn=function(){return[10,50,100,250,500]};function tn(e,s){if(1&e){const t=n.EpF();n.ynx(0),n.TgZ(1,"div",22)(2,"div",23)(3,"div",24),n._uU(4,"Nama kegiatan"),n.qZA(),n.TgZ(5,"div",25),n._uU(6,"Jadwal"),n.qZA(),n.TgZ(7,"div",26),n._uU(8,"Status"),n.qZA(),n._UZ(9,"div",27),n.qZA(),n.YNc(10,X,2,2,"ng-container",5),n.ALo(11,"async"),n.qZA(),n.TgZ(12,"mat-paginator",28),n.NdJ("page",function(o){n.CHM(t);const r=n.oxw(2);return n.KtG(r.pageEvent(o))}),n.qZA(),n.BQk()}if(2&e){const t=n.oxw(2);n.xp6(10),n.Q6J("ngIf",n.lcZ(11,7,t.kegiatanItems$)),n.xp6(2),n.Q6J("ngClass",n.VKq(9,q,t.isLoading))("length",t.pagination.recordsTotal)("pageIndex",t.pagination.draw)("pageSize",t.pagination.perPage)("pageSizeOptions",n.DdM(11,nn))("showFirstLastButtons",!0)}}function en(e,s){if(1&e&&(n.ynx(0),n.YNc(1,tn,13,12,"ng-container",21),n.BQk()),2&e){const t=s.ngIf;n.oxw();const i=n.MAs(24);n.xp6(1),n.Q6J("ngIf",t.length>0)("ngIfElse",i)}}function an(e,s){1&e&&(n.TgZ(0,"fuse-alert",44)(1,"span",45),n._uU(2,"Undangan kegiatan tidak ditemukan!"),n.qZA()()),2&e&&n.Q6J("type","info")}let on=(()=>{class e{constructor(t,i,o,r,l,m,mn,un,fn){this._changeDetectorRef=t,this._kegiatanService=i,this._fuseConfirmationService=o,this._toastr=r,this._formBuilder=l,this._referensiService=m,this._matDialog=mn,this._authService=un,this._userService=fn,this.isLoading=!1,this.selected=null,this.role=this._authService.role,this.statusKegiatanList=this._referensiService.statusKegiatanList(),this.displayedColumns=["namaKegiatan","jadwal","status","action"],this.dataSourceUndangan=new u.by,this.lengthUndangan=null,this.pageSizeUndangan=10,this._unsubscribeAll=new F.x}ngOnInit(){this.form=this._formBuilder.group({byStatus:[""],byDeskripsi:[null]}),this._userService.user$.pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{this.pnsId=t.pnsId,this._kegiatanService.getListUndangan(0,10,{byPnsId:t.pnsId}).subscribe(),this.kegiatanItems$=this._kegiatanService.kegiatanItems$,this._kegiatanService.kegiatanItems$.pipe((0,f.R)(this._unsubscribeAll)).subscribe()}),this._kegiatanService.pagination$.pipe((0,f.R)(this._unsubscribeAll)).subscribe(t=>{this.pagination=t,this._changeDetectorRef.markForCheck()})}ngAfterViewInit(){}ngOnDestroy(){this._unsubscribeAll.next(null),this._unsubscribeAll.complete()}pageEvent(t){this.fetch(t.pageIndex,t.pageSize,this.form.getRawValue()).subscribe()}toggleSearch(){this.fetch(this.pagination.draw,this.pagination.perPage,this.form.getRawValue()).subscribe()}toggleConfirm(t){this._fuseConfirmationService.open({title:"Apakah Anda yakin untuk hadri pada kegiatan `"+t.kegiatanSimpleDto.judul+"` ?",message:'<span class="font-medium">Tindakan ini tidak dapat dibatalkan!</span>',icon:{show:!0,name:"heroicons_outline:x",color:"warn"},actions:{confirm:{show:!0,label:"Konfirm hadir",color:"warn"},cancel:{show:!0,label:"Batal"}},dismissible:!0}).afterClosed().subscribe(o=>{"confirmed"===o&&this._kegiatanService.confirm({id:t.kegiatanSimpleDto.id,isHadir:!0}).subscribe(l=>{l?.success?this._toastr.success("Kehadian untuk undangan kegiatan `"+t.kegiatanSimpleDto.judul+"` telah berhasil dikonfirmasi"):this._toastr.error(l?.message,"ERROR")})})}fetch(t=0,i=10,o={}){return o.byPnsId=this.pnsId,o.byStatus||(o.byStatus=null),this._kegiatanService.getListUndangan(+t,+i,o).pipe()}toggleDetails(t){this.selected&&this.selected.id===t?this.closeDetails():this._kegiatanService.getDetail(t).subscribe(i=>{this.selected=i,this.dataSourceUndangan=new u.by(this.selected.undanganDtoList.slice(0,this.pageSizeUndangan)),this.dataSourceUndangan.paginator=this.paginatorUndangan,this.lengthUndangan=this.selected.undanganDtoList.length,this._changeDetectorRef.markForCheck()})}onPageChanged(t){const i=t.pageIndex*t.pageSize;this.dataSourceUndangan.data=this.selected.undanganDtoList.slice(i,i+t.pageSize),this._changeDetectorRef.markForCheck()}closeDetails(){this.selected=null}toggleDelete(t){this._fuseConfirmationService.open({title:"Hapus undangan kegiatan",message:'<span class="font-medium">Tindakan ini tidak dapat dibatalkan!</span>',icon:{show:!0,name:"heroicons_outline:x",color:"warn"},actions:{confirm:{show:!0,label:"Konfirm hapus",color:"warn"},cancel:{show:!0,label:"Batal"}},dismissible:!0}).afterClosed().subscribe(o=>{"confirmed"===o&&this._kegiatanService.deleteUndangan(t).subscribe(r=>{r?.success?(this._toastr.success("Undangan kegiatan telah dihapus","Hapus Berhasil"),this.closeDetails(),this._kegiatanService.getList().subscribe()):this._toastr.error(r?.message,"ERROR")})})}toggleOpenFile(t){window.open(t,"_blank")}openConfirmationDialog(t,i,o){this._fuseConfirmationService.open({title:t?"Menyetujui kehadiran "+i:"Menolak kehadiran "+i,message:'<span class="font-medium">Tindakan ini tidak dapat dibatalkan!</span>',icon:{show:!0,name:t?"heroicons_outline:check":"heroicons_outline:x",color:t?"primary":"warn"},actions:{confirm:{show:!0,label:t?"Setuju":"Tolak",color:t?"primary":"warn"},cancel:{show:!0,label:"Batal"}},dismissible:!0}).afterClosed().subscribe(l=>{"confirmed"===l&&this._kegiatanService.approvalUndangan({isApprove:t,pnsId:o,id:this.selected.id,alasan:null}).subscribe(m=>{m?.success?this._toastr.success("Peserta "+i+" telah dikonfirmasi","Konfirmasi Berhasil"):this._toastr.error(m?.message,"ERROR")})})}trackByFn(t,i){return String(i.id)||String(t)}trackByFnType(t,i){return i.id||t}}return e.\u0275fac=function(t){return new(t||e)(n.Y36(n.sBO),n.Y36(B.B),n.Y36(J.R),n.Y36(O._W),n.Y36(c.qu),n.Y36(Q.A2),n.Y36(U.uw),n.Y36(M.e),n.Y36(Y.K))},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],viewQuery:function(t,i){if(1&t&&n.Gf(z,7),2&t){let o;n.iGM(o=n.CRH())&&(i.paginatorUndangan=o.first)}},features:[n._Bn([{provide:d.sG,useValue:d.sG}])],decls:25,vars:9,consts:[[1,"flex","flex-col","flex-auto","min-w-0","sm:overflow-hidden","bg-card","dark:bg-transparent"],[1,"relative","flex","flex-col","sm:flex-row","flex-0","sm:items-center","sm:justify-between","py-4","px-4","md:px-8","border-b"],["class","absolute inset-x-0 bottom-0",4,"ngIf"],[1,"text-2xl","font-extrabold","tracking-tight","leading-none"],[1,"ml-0.5","font-medium","text-secondary"],[4,"ngIf"],[3,"formGroup"],[1,"flex","items-center","mt-4","sm:mt-0","md:mt-4"],[1,"flex-auto","ml-4"],[1,"fuse-mat-no-subscript","w-full","min-w-50"],[3,"formControlName"],["value",""],[4,"ngFor","ngForOf","ngForTrackBy"],["mat-stroked-button","",1,"ml-4","bg-card","hover:bg-hover",3,"click"],[1,"ml-2","mr-1"],[1,"flex","flex-auto","overflow-hidden"],[1,"flex","flex-col","flex-auto","sm:mb-18","overflow-hidden","sm:overflow-y-auto"],["noItems",""],[1,"absolute","inset-x-0","bottom-0"],[3,"mode"],[3,"value"],[4,"ngIf","ngIfElse"],[1,"grid"],[1,"item-grid","z-10","sticky","top-0","grid","grid-flow-col","auto-cols-max","md:auto-cols-min","grid-cols-12","gap-3","py-3","px-6","shadow","text-md","font-semibold","text-secondary","bg-gray-50","dark:bg-black","dark:bg-opacity-5"],[1,"md:block","col-span-6"],[1,"hidden","md:block","col-span-3"],[1,"hidden","md:block","col-span-2"],[1,"hidden","md:block","col-span-1"],[1,"sticky","sm:absolute","sm:inset-x-0","sm:bottom-0","border-b","sm:border-t","sm:border-b-0","z-10","bg-gray-50","dark:bg-transparent",3,"ngClass","length","pageIndex","pageSize","pageSizeOptions","showFirstLastButtons","page"],[1,"item-grid","grid","grid-flow-col","auto-cols-max","md:auto-cols-min","grid-cols-12","items-center","gap-2","py-3","px-6","border-b"],[1,"font-medium","tracking-tight","leading-6","truncate","text-md"],[1,"text-secondary","font-medium"],[1,"flex","flex-col","sm:flex-row","sm:items-center","mt-2","sm:mt-1","sm:space-x-2","text-md","leading-5"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide","text-gray-500","bg-gray-100","dark:text-gray-300","dark:bg-gray-700"],[1,"leading-relaxed","whitespace-nowrap","text-sm"],[1,"hidden","sm:block"],[1,"flex","items-center"],["svgIcon","heroicons_outline:location-marker",1,"icon-size-5","text-hint"],["svgIcon","attach_file",1,"icon-size-5","text-hint"],[1,"ml-1.5","text-sm","underline",3,"click"],[1,"text-secondary","font-medium","text-sm"],[1,"inline-flex","items-center","font-bold","text-xs","px-2.5","py-0.5","rounded-full","tracking-wide",3,"ngClass"],["mat-stroked-button","",3,"color","click"],[1,"ml-1","mr-1"],[3,"type"],["fuseAlertTitle",""]],template:function(t,i){1&t&&(n.TgZ(0,"div",0)(1,"div",1),n.YNc(2,G,2,1,"div",2),n.TgZ(3,"div")(4,"div",3),n._uU(5,"Undangan\xa0Kegiatan"),n.qZA(),n.TgZ(6,"div",4),n.YNc(7,H,3,3,"ng-container",5),n.qZA()(),n.TgZ(8,"form",6)(9,"div",7)(10,"div",8)(11,"mat-form-field",9)(12,"mat-select",10)(13,"mat-option",11),n._uU(14,"-- Semua Status --"),n.qZA(),n.YNc(15,$,3,2,"ng-container",12),n.qZA()()(),n.TgZ(16,"button",13),n.NdJ("click",function(){return i.toggleSearch()}),n.TgZ(17,"span",14),n._uU(18,"Cari"),n.qZA()()()()(),n.TgZ(19,"div",15)(20,"div",16),n.YNc(21,en,2,2,"ng-container",5),n.ALo(22,"async"),n.YNc(23,an,3,1,"ng-template",null,17,n.W1O),n.qZA()()()),2&t&&(n.xp6(2),n.Q6J("ngIf",i.isLoading),n.xp6(5),n.Q6J("ngIf",(null==i.pagination?null:i.pagination.recordsTotal)>0),n.xp6(1),n.Q6J("formGroup",i.form),n.xp6(4),n.Q6J("formControlName","byStatus"),n.xp6(3),n.Q6J("ngForOf",i.statusKegiatanList)("ngForTrackBy",i.trackByFn),n.xp6(6),n.Q6J("ngIf",n.lcZ(22,7,i.kegiatanItems$)))},dependencies:[g.mk,g.sg,g.O5,x.lW,k.KE,v.Hw,y.NW,b.pW,S.gD,d.ey,c._Y,c.JJ,c.JL,c.sg,c.u,E.W,g.Ov,g.JJ,g.rS,j.A],encapsulation:2,data:{animation:N.L},changeDetection:0}),e})();var sn=a(7937),rn=a(5507),ln=a(1208),gn=a(5184);let cn=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,i){1&t&&n._UZ(0,"router-outlet")},dependencies:[h.lC],encapsulation:2}),e})(),dn=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=n.oAB({type:e}),e.\u0275inj=n.cJS({imports:[g.ez,h.Bz.forChild([{path:"",component:cn,children:[{path:"",component:on}]}]),ln.c,x.ot,K.p9,k.lN,v.Ps,D.c,Z.Tx,y.TU,b.Cv,d.si,A.JX,S.LD,R.rP,I.AV,T.m,C.Nh,U.Is,w.fC,L.FA,_.Yd,u.p0,sn.w,rn.yI.forRoot(),gn.p]}),e})()}}]);