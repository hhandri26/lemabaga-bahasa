"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[8562],{310:(E,U,s)=>{s.d(U,{k:()=>A});var T=s(5732),c=s(4121),x=s(3787),t=s(4945),v=s(8168),f=s(5598),_=s(7969),d=s(1528),F=s(2340),h=s(4537),b=s(8951);let A=(()=>{class g{constructor(n,r){this._httpClient=n,this._authService=r,this._apiUrl=`${F.N.apiUrl}/formasi`,this.httpHeaders=new T.WM({"Content-Type":"application/json",Authorization:"Bearer "+this._authService.accessToken}),this.uploadHttpHeaders=new T.WM({Accept:"*/*",Authorization:"Bearer "+this._authService.accessToken}),this._pagination=new c.X(null),this._items=new c.X(null),this._item=new c.X(null)}get items$(){return this._items.asObservable()}get item$(){return this._item.asObservable()}get pagination$(){return this._pagination.asObservable()}__HTTPHeaderUpload(n){return new T.WM({Accept:"*/*",Authorization:"Bearer "+n})}__HTTPHeaderBlob(n,r){return{headers:new T.WM({"Content-Type":"application/json",Authorization:"Bearer "+n}),responseType:r}}getList(n=0,r=10,l={}){let p={page:""+n,size:""+r};return p={...p,...l},this._httpClient.post(this._apiUrl+"/filter",p).pipe((0,v.b)(u=>{this._pagination.next({recordsTotal:u.totalElements,perPage:u.size,draw:u.number}),this._items.next(u.content)}))}getListComplete(n={q:""},r=0,l=10){return this._httpClient.get(this._apiUrl+"/formasi-detail/completed",{params:n}).pipe((0,v.b)(p=>{const y=r*l,O=p.slice(y,y+l);this._items.next(O),this._pagination.next({recordsTotal:p.length,perPage:l,draw:r})}))}getById(n){return this.items$.pipe((0,f.q)(1),(0,_.U)(r=>{const l=r.find(p=>p.id===n)||null;return this._item.next(l),l}),(0,d.w)(r=>r?(0,t.of)(r):(0,x._)("Tidak dapat menemukan data dengan id #"+n+"!")))}saveUsul(n){return this._httpClient.post(this._apiUrl+"/save-usul",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}calculate(n){return this._httpClient.post(this._apiUrl+"/hitung-formula",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}createUsul(n){return this._httpClient.post(this._apiUrl+"/create-usul",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}approveUsulan(n){return this._httpClient.post(this._apiUrl+"/send-recommendation",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}sendMenpan(n){return this._httpClient.post(this._apiUrl+"/send-approved-menpan",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}setComplete(n){return this._httpClient.post(this._apiUrl+"/set-complete",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}submitUsul(n){return this._httpClient.post(this._apiUrl+"/submit-usul",n,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}returnUsulan(n){return this._httpClient.post(this._apiUrl+"/return-formasi",n).pipe((0,v.b)(r=>r),(0,d.w)(r=>r?(0,t.of)(r):(0,x._)("return usulan error!")))}getRekap(n=0,r=10){return this._httpClient.get(this._apiUrl+"/get-rekap").pipe((0,v.b)(l=>{const u=n*r,C=l.slice(u,u+r);this._items.next(C),this._pagination.next({recordsTotal:l.length,perPage:r,draw:n})}))}getDetail(n){return this._httpClient.get(this._apiUrl+"/detail/"+n).pipe((0,f.q)(1),(0,d.w)(r=>r?(0,t.of)(r):(0,x._)("Tidak dapat menemukan detail usulan formasi dengan id #"+n+"!")))}getRekapExists(n){return this._httpClient.get(this._apiUrl+"/get-formasi-exists",{params:n}).pipe((0,f.q)(1),(0,d.w)(r=>(0,t.of)(r)))}getHistory(n){return this._httpClient.get(this._apiUrl+"/history/"+n).pipe((0,f.q)(1),(0,_.U)(r=>{if(r?.success)return r.mapData.events}),(0,d.w)(r=>r?(0,t.of)(r):(0,x._)("Tidak dapat menemukan history usulan formasi dengan id #"+n+"!")))}cetak(n){return this._httpClient.get(`${this._apiUrl}/dokumen/`+n,this.__HTTPHeaderBlob(this._authService.accessToken,"blob")).pipe((0,_.U)(r=>r))}getListById(n){return this._items.pipe((0,f.q)(1),(0,_.U)(r=>{const l=r.find(p=>p.id===n)||null;return this._item.next(l),l}),(0,d.w)(r=>r?(0,t.of)(r):(0,x._)("Tidak dapat menemukan kegiatan dengan id #"+n+"!")))}}return g.\u0275fac=function(n){return new(n||g)(h.LFG(T.eN),h.LFG(b.e))},g.\u0275prov=h.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},8562:(E,U,s)=>{s.d(U,{I:()=>M});var T=s(831),c=s(7204),x=s(4466),t=s(4537);let v=(()=>{class e extends c.fS{numberWithCommas(o){return new Number(o).toFixed(2).toString().replace(/\./g,",").replace(/\B(?=(\d{3})+(?!\d))/g,".")}}return e.\u0275fac=function(){let i;return function(a){return(i||(i=t.n5z(e)))(a||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["formly-field-number"]],features:[t.qOj],decls:1,vars:1,template:function(o,a){1&o&&t._uU(0),2&o&&t.Oqu(a.numberWithCommas(+a.formControl.value))},encapsulation:2}),e})();var f=s(3331),_=s(9638),d=s(310),F=s(8292),h=s(8692);function b(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"td",10),t._UZ(2,"formly-field",13),t.qZA(),t.BQk()),2&e){const o=i.$implicit;t.xp6(2),t.Q6J("field",o)}}function A(e,i){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"tr",9)(2,"td",10),t._uU(3),t.qZA(),t.YNc(4,b,3,1,"ng-container",8),t.TgZ(5,"th",11)(6,"button",1),t.NdJ("click",function(){const k=t.CHM(o).index,w=t.oxw();return t.KtG(w.remove(k))}),t._UZ(7,"mat-icon",12),t.qZA()()(),t.BQk()}if(2&e){const o=i.$implicit,a=i.index;t.xp6(3),t.Oqu(a+1),t.xp6(1),t.Q6J("ngForOf",o.fieldGroup)}}let g=(()=>{class e extends c.hv{constructor(o,a){super(),this._formasiService=o,this._toastr=a}calculate(){const o=new FormData,a=[];this.model.forEach(m=>{a.push({uraianTugasId:m.uraianTugasId.id,output:+m.output})}),console.log(a),o.append("formula",JSON.stringify(a)),this._formasiService.calculate(o).subscribe(m=>{console.log(m),m?.success?(this._toastr.success(m.mapData.hasilPerhitungan.sumOfWorkerNeeds+" Orang","Jumlah formasi yang dibutuhkan"),this.form.reset()):this._toastr.error(m?.message,"ERROR")})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(d.k),t.Y36(F._W))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-formasi-formula"]],features:[t.qOj],decls:27,vars:1,consts:[[1,"grid","justify-items-end","mb-5"],["mat-button","",3,"click"],["svgIcon","heroicons_outline:plus"],[1,"overflow-x-auto","relative","mb-5","border-b"],[1,"w-full","text-sm"],[1,"text-xs","uppercase","bg-gray-100"],["scope","col",1,"py-2","px-2",2,"width","70px"],["scope","col",1,"py-2","px-2",2,"width","100%"],[4,"ngFor","ngForOf"],[1,"border-b"],[1,"py-2","px-2"],["scope","row",1,"py-2","px-2"],["svgIcon","heroicons_outline:trash"],[3,"field"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return a.add()}),t._UZ(2,"mat-icon",2),t._uU(3,"Uraian\xa0Tugas "),t.qZA()(),t.TgZ(4,"div",3)(5,"table",4)(6,"thead",5)(7,"tr")(8,"th",6),t._uU(9,"No"),t.qZA(),t.TgZ(10,"th",7),t._uU(11,"Uraian\xa0Tugas"),t.qZA(),t.TgZ(12,"th",6),t._uU(13,"Satuan\xa0Hasil"),t._UZ(14,"br"),t._uU(15,"Output"),t.qZA(),t.TgZ(16,"th",6),t._uU(17,"Waktu\xa0Penyelesaian"),t._UZ(18,"br"),t._uU(19,"Output\xa0Per\xa0Jam"),t.qZA(),t.TgZ(20,"th",6),t._uU(21,"\xa0"),t.qZA()()(),t.TgZ(22,"tbody"),t.YNc(23,A,8,2,"ng-container",8),t.qZA()()(),t.TgZ(24,"div",0)(25,"button",1),t.NdJ("click",function(){return a.calculate()}),t._uU(26," Kalkulasi "),t.qZA()()),2&o&&(t.xp6(23),t.Q6J("ngForOf",a.field.fieldGroup))},dependencies:[h.sg,c.cw,f.Hw,_.lW],styles:[".mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select .mat-select-trigger .mat-select-value .mat-select-value-text>*{white-space:break-spaces}  formly-field-mat-select{width:100%!important}.formly-waktu[_ngcontent-%COMP%]{float:right;font-size:.9rem!important;font-weight:400;padding-bottom:10px;padding-right:10px}"],changeDetection:0}),e})();var Z=s(2494);function n(e,i){if(1&e){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",5)(2,"span",6),t._uU(3),t.qZA(),t.TgZ(4,"ul",7)(5,"li")(6,"button",8),t.NdJ("click",function(){const k=t.CHM(o).index,w=t.oxw();return t.KtG(w.remove(k))}),t._UZ(7,"mat-icon",9),t._uU(8," Hapus Formasi "),t.qZA()()()(),t._UZ(9,"formly-group",10),t.BQk()}if(2&e){const o=i.$implicit,a=i.index,m=t.oxw();t.xp6(3),t.hij("Formasi #",a+1,":"),t.xp6(6),t.Q6J("model",m.model[a])("field",o)("options",m.options)("form",m.formControl)}}function r(e,i){1&e&&(t.ynx(0),t.TgZ(1,"fuse-alert",11)(2,"span",12),t._uU(3,"Formasi baru belum ditambahkan"),t.qZA()(),t.BQk()),2&e&&(t.xp6(1),t.Q6J("type","info"))}let l=(()=>{class e extends c.hv{}return e.\u0275fac=function(){let i;return function(a){return(i||(i=t.n5z(e)))(a||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-formasi-rows"]],features:[t.qOj],decls:6,vars:3,consts:[[1,"grid","justify-items-start","mb-5","border-b"],["mat-flat-button","",1,"mb-5",3,"color","click"],["svgIcon","heroicons_outline:plus"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"p-2","flex","items-center","justify-between","bg-gray-100","mb-4"],[1,"text-xl","font-medium","text-center"],[1,"flex","flex-wrap","items-center","mt-3","text-sm","sm:mt-0"],["mat-button","",3,"click"],["svgIcon","heroicons_outline:trash"],[3,"model","field","options","form"],[3,"type"],["fuseAlertTitle",""]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"button",1),t.NdJ("click",function(){return a.add()}),t._UZ(2,"mat-icon",2),t._uU(3,"Formasi "),t.qZA()(),t.YNc(4,n,10,5,"ng-container",3),t.YNc(5,r,4,1,"ng-container",4)),2&o&&(t.xp6(1),t.Q6J("color","accent"),t.xp6(3),t.Q6J("ngForOf",a.field.fieldGroup),t.xp6(1),t.Q6J("ngIf",!a.field.fieldGroup.length))},dependencies:[h.sg,h.O5,c.TM,f.Hw,_.lW,Z.W],styles:[".mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select .mat-select-trigger .mat-select-value .mat-select-value-text>*{white-space:break-spaces}  formly-field-mat-select{width:100%!important}"],changeDetection:0}),e})(),p=(()=>{class e extends c.fS{}return e.\u0275fac=function(){let i;return function(a){return(i||(i=t.n5z(e)))(a||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["formly-field-string"]],features:[t.qOj],decls:1,vars:1,template:function(o,a){1&o&&t._uU(0),2&o&&t.Oqu(a.formControl.value)},encapsulation:2}),e})();var u=s(7775);function y(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"td",9),t._UZ(2,"formly-field",10),t.qZA(),t.BQk()),2&e){const o=i.$implicit;t.xp6(1),t.Q6J("hidden","id"===o.key),t.xp6(1),t.Q6J("field",o)}}function C(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"tr",7)(2,"td",8),t._uU(3),t.qZA(),t.YNc(4,y,3,2,"ng-container",6),t.qZA(),t.BQk()),2&e){const o=i.$implicit,a=i.index;t.xp6(3),t.Oqu(a+1),t.xp6(1),t.Q6J("ngForOf",o.fieldGroup)}}let O=(()=>{class e extends c.hv{}return e.\u0275fac=function(){let i;return function(a){return(i||(i=t.n5z(e)))(a||e)}}(),e.\u0275cmp=t.Xpm({type:e,selectors:[["app-form-formasi-approve"]],features:[t.qOj],decls:16,vars:1,consts:[[1,"overflow-x-auto","relative","mb-5","border-b"],[1,"w-full","text-sm"],[1,"text-xs","uppercase","bg-gray-100","text-left"],["scope","col",1,"py-2","px-2",2,"width","70px"],["scope","col",1,"py-2","px-2",2,"width","50%"],["scope","col",1,"py-2","px-2",2,"width","100px"],[4,"ngFor","ngForOf"],[1,"border-b"],[1,"py-2","px-2"],[1,"py-2","px-2",3,"hidden"],[3,"field"]],template:function(o,a){1&o&&(t.TgZ(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),t._uU(5,"No"),t.qZA(),t.TgZ(6,"th",4),t._uU(7,"Unit Kerja"),t.qZA(),t.TgZ(8,"th",4),t._uU(9,"Jabatan"),t.qZA(),t.TgZ(10,"th",5),t._uU(11,"Jumlah Rekomendasi Instansi"),t.qZA(),t.TgZ(12,"th",5),t._uU(13,"Jumlah Disetujui KEMENPAN"),t.qZA()()(),t.TgZ(14,"tbody"),t.YNc(15,C,5,2,"ng-container",6),t.qZA()()()),2&o&&(t.xp6(15),t.Q6J("ngForOf",a.field.fieldGroup))},dependencies:[h.sg,c.cw],styles:[".mat-form-field.mat-form-field-appearance-fill .mat-form-field-wrapper .mat-form-field-flex .mat-form-field-infix .mat-select .mat-select-trigger .mat-select-value .mat-select-value-text>*{white-space:break-spaces}  formly-field-mat-select{width:100%!important}.formly-waktu[_ngcontent-%COMP%]{float:right;font-size:.9rem!important;font-weight:400;padding-bottom:10px;padding-right:10px}"],changeDetection:0}),e})(),M=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[x.m,c.X0.forRoot({extras:{lazyRender:!0},types:[{name:"form_formasi_rows",component:l},{name:"form_formasi_formula",component:g},{name:"type_number",component:v},{name:"type_string",component:p},{name:"form_formasi_approve",component:O}]}),T.o,f.Ps,_.ot,u.fC]}),e})()}}]);