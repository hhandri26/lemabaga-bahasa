"use strict";(self.webpackChunkfuse=self.webpackChunkfuse||[]).push([[9594],{1822:(S,D,h)=>{h.d(D,{c:()=>s});var _=h(5732),E=h(4121),m=h(3787),v=h(4945),f=h(8168),C=h(5598),w=h(7969),P=h(1528),u=h(2340),t=h(4537),i=h(8951);let s=(()=>{class a{constructor(e,n){this._httpClient=e,this._authService=n,this._apiUrl=`${u.N.apiUrl}`,this.httpHeaders=new _.WM({"Content-Type":"application/json",Authorization:"Bearer "+this._authService.accessToken}),this._pagination=new E.X(null),this._items=new E.X(null),this._item=new E.X(null),this._itemPlay=new E.X(null)}get pagination$(){return this._pagination.asObservable()}get items$(){return this._items.asObservable()}get item$(){return this._item.asObservable()}get itemPlay$(){return this._itemPlay.asObservable()}__HTTPHeaderUpload(e){return new _.WM({Accept:"*/*",Authorization:"Bearer "+e})}__HTTPHeaderBlob(e,n){return{headers:new _.WM({"Content-Type":"application/json",Authorization:"Bearer "+e}),responseType:n}}getList(e={page:0,size:10,sortField:"startDate",sortOrder:"DESC"}){let n={};return n={...n,...e},this._httpClient.post(this._apiUrl+"/elearning/course/summary/filter",n).pipe((0,f.b)(o=>{this._pagination.next({recordsTotal:o.totalElements,perPage:o.size,draw:o.number}),this._items.next(o.content)}))}getPlayList(e={page:0,size:10,sortField:"startDate",sortOrder:"DESC"}){let n={};return n={...n,...e},this._httpClient.post(this._apiUrl+"/elearning/course-play/summary/filter",n).pipe((0,f.b)(o=>{this._pagination.next({recordsTotal:o.totalElements,perPage:o.size,draw:o.number}),this._items.next(o.content)}))}getPlayById(e){return this._httpClient.get(this._apiUrl+"/elearning/course-play/id/"+e).pipe((0,C.q)(1),(0,w.U)(n=>{if(n?.success)return this._item.next(n.mapData.data),n.mapData.data}),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("Tidak dapat menemukan data id #"+e+"!")))}getCandidateList(e){return this._httpClient.post(this._apiUrl+"/elearning/course/candidate-participant/filter",JSON.stringify(e),{headers:this.httpHeaders}).pipe((0,w.U)(n=>{if(n?.success)return n?.mapData?.participantCandidates}))}getById(e){return this._httpClient.get(this._apiUrl+"/elearning/course/id/"+e).pipe((0,C.q)(1),(0,w.U)(n=>{if(n?.success)return this._item.next(n.mapData.data),n.mapData.data}),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("Tidak dapat menemukan data id #"+e+"!")))}courseModify(e){return this._httpClient.post(this._apiUrl+"/elearning/course/modify",e,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}save(e){return this._httpClient.post(this._apiUrl+"/elearning/course/create",e,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}setTemplateCertificate(e){return this._httpClient.post(this._apiUrl+"/elearning/course/certificate/upload-template",e,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}assignInstruktur(e){return this._httpClient.post(this._apiUrl+"/elearning/course/assign-instructure-test",e,{headers:this.httpHeaders}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}addParticipant(e){return this._httpClient.post(this._apiUrl+"/elearning/course/add-participant",e,{headers:this.httpHeaders}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}sendInvitation(e){return this._httpClient.post(this._apiUrl+"/elearning/course/participant/send-invitation",e,{headers:this.httpHeaders}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}removeParticipant(e){return this._httpClient.post(this._apiUrl+"/elearning/course/participant/remove-participant",e,{headers:this.httpHeaders}).pipe((0,f.b)(n=>n),(0,P.w)(n=>n?(0,v.of)(n):(0,m._)("created error!")))}sectionCreate(e){return this._httpClient.post(this._apiUrl+"/elearning/course/section/create",e,{headers:this.httpHeaders})}sectionModify(e){return this._httpClient.post(this._apiUrl+"/elearning/course/section/modify",e,{headers:this.httpHeaders})}activityGroupCreate(e){return this._httpClient.post(this._apiUrl+"/elearning/course/activity-group/create",e,{headers:this.httpHeaders})}activityGroupModify(e){return this._httpClient.post(this._apiUrl+"/elearning/course/activity-group/modify",e,{headers:this.httpHeaders})}courseDocumentUpload(e){return this._httpClient.post(this._apiUrl+"/elearning/course/document/upload",e,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}courseDocumentDownload(e){return this._httpClient.get(`${this._apiUrl}/elearning/course/document/`+e,this.__HTTPHeaderBlob(this._authService.accessToken,"blob")).pipe((0,w.U)(n=>n))}courseAttendanceDownload(e){return this._httpClient.get(`${this._apiUrl}/elearning/course/attendance/download/`+e,this.__HTTPHeaderBlob(this._authService.accessToken,"blob")).pipe((0,w.U)(n=>n))}courseAssesmentDownload(e){return this._httpClient.get(`${this._apiUrl}/elearning/course/assessment/download/`+e,this.__HTTPHeaderBlob(this._authService.accessToken,"blob")).pipe((0,w.U)(n=>n))}activityAttendance(e){return this._httpClient.post(this._apiUrl+"/elearning/course/activity/attendance/save",e,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)})}activityURL(e){return this._httpClient.post(this._apiUrl+"/elearning/course/activity/url/save",e,{headers:this.httpHeaders})}activityMaterial(e){return this._httpClient.post(this._apiUrl+"/elearning/course/activity/material/save",e,{headers:this.httpHeaders})}activityAssignment(e){return this._httpClient.post(this._apiUrl+"/elearning/course/activity/assignment/save",e,{headers:this.httpHeaders})}assignCourseTest(e){return this._httpClient.post(this._apiUrl+"/elearning/course/assign-bucket-quiz",e,{headers:this.httpHeaders})}startPretest(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/pretest/start",e,{headers:this.httpHeaders})}startPosttest(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/posttest/start",e,{headers:this.httpHeaders})}answerPretest(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/pretest/answer",e,{headers:this.httpHeaders})}answerPosttest(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/posttest/answer",e,{headers:this.httpHeaders})}endPosttest(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/posttest/end",e,{headers:this.httpHeaders})}endPretest(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/pretest/end",e,{headers:this.httpHeaders})}getPretest(e){return this._httpClient.get(this._apiUrl+"/elearning/course-play/pretest/sessions/"+e,{headers:this.httpHeaders})}getPosttest(e){return this._httpClient.get(this._apiUrl+"/elearning/course-play/posttest/sessions"+e,{headers:this.httpHeaders})}getAssignmentTask(e){return this._httpClient.get(this._apiUrl+"/elearning/course/assignment/activity/"+e,{headers:this.httpHeaders})}getCourseDetail(e){return this._httpClient.get(this._apiUrl+"/elearning/course/id/"+e)}activityGroupDelete(e){return this._httpClient.delete(this._apiUrl+"/elearning/course/activity-group/delete/"+e)}sectionDelete(e){return this._httpClient.delete(this._apiUrl+"/elearning/course/section/delete/"+e)}activityDetailDelete(e){return this._httpClient.delete(this._apiUrl+"/elearning/course/activity/delete/"+e)}checkedActivity(e){return this._httpClient.get(this._apiUrl+"/elearning/course-play/checkin-out/activity/"+e)}courseDelete(e){return this._httpClient.delete(this._apiUrl+"/elearning/course/delete/"+e)}getPosition(){return new Promise((e,n)=>{navigator.geolocation.getCurrentPosition(o=>{e({lng:o.coords.longitude,lat:o.coords.latitude})},o=>{n(o)})})}getLocation(e,n){return this._httpClient.get("https://nominatim.openstreetmap.org/reverse.php?format=json&lat="+e+"&lon="+n+"&zoom=18&format=jsonv2",{headers:this.httpHeaders}).pipe((0,w.U)(o=>o.display_name))}feedbackAttendance(e,n){let o="course-play/feedback/attendance";return"ROLE_INSTRUKTUR"===n&&(o="course/attendance-instructure"),this._httpClient.post(this._apiUrl+"/elearning/"+o,e,{headers:this.__HTTPHeaderUpload(this._authService.accessToken)}).pipe((0,f.b)(d=>d),(0,P.w)(d=>d?(0,v.of)(d):(0,m._)("created error!")))}feedbackAssignment(e){return this._httpClient.post(this._apiUrl+"/elearning/course-play/feedback/assignment",JSON.stringify(e),{headers:this.httpHeaders})}courseAttendance(e){return this._httpClient.get(this._apiUrl+"/elearning/course/attendance/"+e,{headers:this.httpHeaders})}setBobot(e){return this._httpClient.post(this._apiUrl+"/elearning/course/assign-assessment-weight",JSON.stringify(e),{headers:this.httpHeaders})}getCourseAssessmentList(e){return this._httpClient.get(this._apiUrl+"/elearning/course/assessment/"+e+"/list")}setFinalAssessmentCandidate(e){return this._httpClient.post(this._apiUrl+"/elearning/course/final-assessment",JSON.stringify(e),{headers:this.httpHeaders})}previewSertifikat(e){return this._httpClient.get(this._apiUrl+"/elearning/course/certificate/preview?courcesId="+e.courseId+"&pnsId="+e.pnsId,this.__HTTPHeaderBlob(this._authService.accessToken,"blob")).pipe((0,w.U)(n=>n))}}return a.\u0275fac=function(e){return new(e||a)(t.LFG(_.eN),t.LFG(i.e))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})()},8606:(S,D,h)=>{h.d(D,{H:()=>s});var _=h(4466),E=h(3331),m=h(9638),v=h(7775),f=h(8659),C=h(7406),w=h(3556),P=h(2290),u=h(3538),t=h(3911),i=h(4537);let s=(()=>{class a{}return a.\u0275fac=function(e){return new(e||a)},a.\u0275mod=i.oAB({type:a}),a.\u0275inj=i.cJS({imports:[_.m,E.Ps,m.ot,v.fC,f.lN,C.c,w.Fk,t.p0,u.TU,P.T]}),a})()},2290:(S,D,h)=>{h.d(D,{T:()=>P,l:()=>w});var _=h(4537);class E{constructor(t,i,s,a){if(isNaN(t)||isNaN(i))throw new Error(`Point is invalid: (${t}, ${i})`);this.x=+t,this.y=+i,this.pressure=s||0,this.time=a||Date.now()}distanceTo(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}equals(t){return this.x===t.x&&this.y===t.y&&this.pressure===t.pressure&&this.time===t.time}velocityFrom(t){return this.time!==t.time?this.distanceTo(t)/(this.time-t.time):0}}class m{constructor(t,i,s,a,r,e){this.startPoint=t,this.control2=i,this.control1=s,this.endPoint=a,this.startWidth=r,this.endWidth=e}static fromPoints(t,i){const s=this.calculateControlPoints(t[0],t[1],t[2]).c2,a=this.calculateControlPoints(t[1],t[2],t[3]).c1;return new m(t[1],s,a,t[2],i.start,i.end)}static calculateControlPoints(t,i,s){const a=t.x-i.x,r=t.y-i.y,e=i.x-s.x,n=i.y-s.y,o_x=(t.x+i.x)/2,o_y=(t.y+i.y)/2,d_x=(i.x+s.x)/2,d_y=(i.y+s.y)/2,c=Math.sqrt(a*a+r*r),g=Math.sqrt(e*e+n*n),y=g/(c+g),x=i.x-(d_x+(o_x-d_x)*y),T=i.y-(d_y+(o_y-d_y)*y);return{c1:new E(o_x+x,o_y+T),c2:new E(d_x+x,d_y+T)}}length(){let s,a,i=0;for(let r=0;r<=10;r+=1){const e=r/10,n=this.point(e,this.startPoint.x,this.control1.x,this.control2.x,this.endPoint.x),o=this.point(e,this.startPoint.y,this.control1.y,this.control2.y,this.endPoint.y);if(r>0){const d=n-s,c=o-a;i+=Math.sqrt(d*d+c*c)}s=n,a=o}return i}point(t,i,s,a,r){return i*(1-t)*(1-t)*(1-t)+3*s*(1-t)*(1-t)*t+3*a*(1-t)*t*t+r*t*t*t}}class C extends class v{constructor(){try{this._et=new EventTarget}catch{this._et=document}}addEventListener(t,i,s){this._et.addEventListener(t,i,s)}dispatchEvent(t){return this._et.dispatchEvent(t)}removeEventListener(t,i,s){this._et.removeEventListener(t,i,s)}}{constructor(t,i={}){super(),this.canvas=t,this._handleMouseDown=s=>{1===s.buttons&&(this._drawningStroke=!0,this._strokeBegin(s))},this._handleMouseMove=s=>{this._drawningStroke&&this._strokeMoveUpdate(s)},this._handleMouseUp=s=>{1===s.buttons&&this._drawningStroke&&(this._drawningStroke=!1,this._strokeEnd(s))},this._handleTouchStart=s=>{s.cancelable&&s.preventDefault(),1===s.targetTouches.length&&this._strokeBegin(s.changedTouches[0])},this._handleTouchMove=s=>{s.cancelable&&s.preventDefault(),this._strokeMoveUpdate(s.targetTouches[0])},this._handleTouchEnd=s=>{s.target===this.canvas&&(s.cancelable&&s.preventDefault(),this._strokeEnd(s.changedTouches[0]))},this._handlePointerStart=s=>{this._drawningStroke=!0,s.preventDefault(),this._strokeBegin(s)},this._handlePointerMove=s=>{this._drawningStroke&&(s.preventDefault(),this._strokeMoveUpdate(s))},this._handlePointerEnd=s=>{this._drawningStroke&&(s.preventDefault(),this._drawningStroke=!1,this._strokeEnd(s))},this.velocityFilterWeight=i.velocityFilterWeight||.7,this.minWidth=i.minWidth||.5,this.maxWidth=i.maxWidth||2.5,this.throttle="throttle"in i?i.throttle:16,this.minDistance="minDistance"in i?i.minDistance:5,this.dotSize=i.dotSize||0,this.penColor=i.penColor||"black",this.backgroundColor=i.backgroundColor||"rgba(0,0,0,0)",this._strokeMoveUpdate=this.throttle?function f(u,t=250){let a,r,e,i=0,s=null;const n=()=>{i=Date.now(),s=null,a=u.apply(r,e),s||(r=null,e=[])};return function(...d){const c=Date.now(),g=t-(c-i);return r=this,e=d,g<=0||g>t?(s&&(clearTimeout(s),s=null),i=c,a=u.apply(r,e),s||(r=null,e=[])):s||(s=window.setTimeout(n,g)),a}}(C.prototype._strokeUpdate,this.throttle):C.prototype._strokeUpdate,this._ctx=t.getContext("2d"),this.clear(),this.on()}clear(){const{_ctx:t,canvas:i}=this;t.fillStyle=this.backgroundColor,t.clearRect(0,0,i.width,i.height),t.fillRect(0,0,i.width,i.height),this._data=[],this._reset(this._getPointGroupOptions()),this._isEmpty=!0}fromDataURL(t,i={}){return new Promise((s,a)=>{const r=new Image,e=i.ratio||window.devicePixelRatio||1,n=i.width||this.canvas.width/e,o=i.height||this.canvas.height/e,d=i.xOffset||0,c=i.yOffset||0;this._reset(this._getPointGroupOptions()),r.onload=()=>{this._ctx.drawImage(r,d,c,n,o),s()},r.onerror=g=>{a(g)},r.crossOrigin="anonymous",r.src=t,this._isEmpty=!1})}toDataURL(t="image/png",i){return"image/svg+xml"===t?this._toSVG():this.canvas.toDataURL(t,i)}on(){this.canvas.style.touchAction="none",this.canvas.style.msTouchAction="none",this.canvas.style.userSelect="none";const t=/Macintosh/.test(navigator.userAgent)&&"ontouchstart"in document;window.PointerEvent&&!t?this._handlePointerEvents():(this._handleMouseEvents(),"ontouchstart"in window&&this._handleTouchEvents())}off(){this.canvas.style.touchAction="auto",this.canvas.style.msTouchAction="auto",this.canvas.style.userSelect="auto",this.canvas.removeEventListener("pointerdown",this._handlePointerStart),this.canvas.removeEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.removeEventListener("pointerup",this._handlePointerEnd),this.canvas.removeEventListener("mousedown",this._handleMouseDown),this.canvas.removeEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.removeEventListener("mouseup",this._handleMouseUp),this.canvas.removeEventListener("touchstart",this._handleTouchStart),this.canvas.removeEventListener("touchmove",this._handleTouchMove),this.canvas.removeEventListener("touchend",this._handleTouchEnd)}isEmpty(){return this._isEmpty}fromData(t,{clear:i=!0}={}){i&&this.clear(),this._fromData(t,this._drawCurve.bind(this),this._drawDot.bind(this)),this._data=this._data.concat(t)}toData(){return this._data}_getPointGroupOptions(t){return{penColor:t&&"penColor"in t?t.penColor:this.penColor,dotSize:t&&"dotSize"in t?t.dotSize:this.dotSize,minWidth:t&&"minWidth"in t?t.minWidth:this.minWidth,maxWidth:t&&"maxWidth"in t?t.maxWidth:this.maxWidth,velocityFilterWeight:t&&"velocityFilterWeight"in t?t.velocityFilterWeight:this.velocityFilterWeight}}_strokeBegin(t){this.dispatchEvent(new CustomEvent("beginStroke",{detail:t}));const i=this._getPointGroupOptions(),s=Object.assign(Object.assign({},i),{points:[]});this._data.push(s),this._reset(i),this._strokeUpdate(t)}_strokeUpdate(t){if(0===this._data.length)return void this._strokeBegin(t);this.dispatchEvent(new CustomEvent("beforeUpdateStroke",{detail:t}));const r=this._createPoint(t.clientX,t.clientY,void 0!==t.pressure?t.pressure:void 0!==t.force?t.force:0),e=this._data[this._data.length-1],n=e.points,o=n.length>0&&n[n.length-1],d=!!o&&r.distanceTo(o)<=this.minDistance,c=this._getPointGroupOptions(e);if(!o||!o||!d){const g=this._addPoint(r,c);o?g&&this._drawCurve(g,c):this._drawDot(r,c),n.push({time:r.time,x:r.x,y:r.y,pressure:r.pressure})}this.dispatchEvent(new CustomEvent("afterUpdateStroke",{detail:t}))}_strokeEnd(t){this._strokeUpdate(t),this.dispatchEvent(new CustomEvent("endStroke",{detail:t}))}_handlePointerEvents(){this._drawningStroke=!1,this.canvas.addEventListener("pointerdown",this._handlePointerStart),this.canvas.addEventListener("pointermove",this._handlePointerMove),this.canvas.ownerDocument.addEventListener("pointerup",this._handlePointerEnd)}_handleMouseEvents(){this._drawningStroke=!1,this.canvas.addEventListener("mousedown",this._handleMouseDown),this.canvas.addEventListener("mousemove",this._handleMouseMove),this.canvas.ownerDocument.addEventListener("mouseup",this._handleMouseUp)}_handleTouchEvents(){this.canvas.addEventListener("touchstart",this._handleTouchStart),this.canvas.addEventListener("touchmove",this._handleTouchMove),this.canvas.addEventListener("touchend",this._handleTouchEnd)}_reset(t){this._lastPoints=[],this._lastVelocity=0,this._lastWidth=(t.minWidth+t.maxWidth)/2,this._ctx.fillStyle=t.penColor}_createPoint(t,i,s){const a=this.canvas.getBoundingClientRect();return new E(t-a.left,i-a.top,s,(new Date).getTime())}_addPoint(t,i){const{_lastPoints:s}=this;if(s.push(t),s.length>2){3===s.length&&s.unshift(s[0]);const a=this._calculateCurveWidths(s[1],s[2],i),r=m.fromPoints(s,a);return s.shift(),r}return null}_calculateCurveWidths(t,i,s){const a=s.velocityFilterWeight*i.velocityFrom(t)+(1-s.velocityFilterWeight)*this._lastVelocity,r=this._strokeWidth(a,s),e={end:r,start:this._lastWidth};return this._lastVelocity=a,this._lastWidth=r,e}_strokeWidth(t,i){return Math.max(i.maxWidth/(t+1),i.minWidth)}_drawCurveSegment(t,i,s){const a=this._ctx;a.moveTo(t,i),a.arc(t,i,s,0,2*Math.PI,!1),this._isEmpty=!1}_drawCurve(t,i){const s=this._ctx,a=t.endWidth-t.startWidth,r=2*Math.ceil(t.length());s.beginPath(),s.fillStyle=i.penColor;for(let e=0;e<r;e+=1){const n=e/r,o=n*n,d=o*n,c=1-n,g=c*c,U=g*c;let l=U*t.startPoint.x;l+=3*g*n*t.control1.x,l+=3*c*o*t.control2.x,l+=d*t.endPoint.x;let y=U*t.startPoint.y;y+=3*g*n*t.control1.y,y+=3*c*o*t.control2.y,y+=d*t.endPoint.y;const p=Math.min(t.startWidth+d*a,i.maxWidth);this._drawCurveSegment(l,y,p)}s.closePath(),s.fill()}_drawDot(t,i){const s=this._ctx,a=i.dotSize>0?i.dotSize:(i.minWidth+i.maxWidth)/2;s.beginPath(),this._drawCurveSegment(t.x,t.y,a),s.closePath(),s.fillStyle=i.penColor,s.fill()}_fromData(t,i,s){for(const a of t){const{points:r}=a,e=this._getPointGroupOptions(a);if(r.length>1)for(let n=0;n<r.length;n+=1){const o=r[n],d=new E(o.x,o.y,o.pressure,o.time);0===n&&this._reset(e);const c=this._addPoint(d,e);c&&i(c,e)}else this._reset(e),s(r[0],e)}}_toSVG(){const t=this._data,i=Math.max(window.devicePixelRatio||1,1),r=this.canvas.width/i,e=this.canvas.height/i,n=document.createElementNS("http://www.w3.org/2000/svg","svg");n.setAttribute("width",this.canvas.width.toString()),n.setAttribute("height",this.canvas.height.toString()),this._fromData(t,(l,{penColor:y})=>{const p=document.createElement("path");if(!(isNaN(l.control1.x)||isNaN(l.control1.y)||isNaN(l.control2.x)||isNaN(l.control2.y))){const x=`M ${l.startPoint.x.toFixed(3)},${l.startPoint.y.toFixed(3)} C ${l.control1.x.toFixed(3)},${l.control1.y.toFixed(3)} ${l.control2.x.toFixed(3)},${l.control2.y.toFixed(3)} ${l.endPoint.x.toFixed(3)},${l.endPoint.y.toFixed(3)}`;p.setAttribute("d",x),p.setAttribute("stroke-width",(2.25*l.endWidth).toFixed(3)),p.setAttribute("stroke",y),p.setAttribute("fill","none"),p.setAttribute("stroke-linecap","round"),n.appendChild(p)}},(l,{penColor:y,dotSize:p,minWidth:x,maxWidth:T})=>{const M=document.createElement("circle");M.setAttribute("r",(p>0?p:(x+T)/2).toString()),M.setAttribute("cx",l.x.toString()),M.setAttribute("cy",l.y.toString()),M.setAttribute("fill",y),n.appendChild(M)});const d=`<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 ${r} ${e}" width="${r}" height="${e}">`;let c=n.innerHTML;if(void 0===c){const l=document.createElement("dummy"),y=n.childNodes;l.innerHTML="";for(let p=0;p<y.length;p+=1)l.appendChild(y[p].cloneNode(!0));c=l.innerHTML}return"data:image/svg+xml;base64,"+btoa(d+c+"</svg>")}}let w=(()=>{class u{constructor(i){this.elementRef=i,this.options=this.options||{},this.drawStart=new _.vpe,this.drawBeforeUpdate=new _.vpe,this.drawAfterUpdate=new _.vpe,this.drawEnd=new _.vpe}ngAfterContentInit(){const i=this.getCanvas();this.options.canvasHeight&&(i.height=this.options.canvasHeight),this.options.canvasWidth&&(i.width=this.options.canvasWidth),this.signaturePad=new C(i,this.options),this.signaturePad.addEventListener("beginStroke",s=>this.beginStroke(s.detail)),this.signaturePad.addEventListener("beforeUpdateStroke",s=>this.beforeUpdateStroke(s.detail)),this.signaturePad.addEventListener("afterUpdateStroke",s=>this.afterUpdateStroke(s.detail)),this.signaturePad.addEventListener("endStroke",s=>this.endStroke(s.detail))}ngOnDestroy(){const i=this.getCanvas();i.width=0,i.height=0}redrawCanvas(){const i=this.getCanvas(),s=Math.max(window.devicePixelRatio||1,1);i.width=i.offsetWidth*s,i.height=i.offsetHeight*s,i.getContext("2d").scale(s,s),this.signaturePad.clear()}toData(){return this.signaturePad?this.signaturePad.toData():[]}fromData(i){this.signaturePad.fromData(i)}toDataURL(i,s){return this.signaturePad.toDataURL(i,s)}fromDataURL(i,s={}){!s.hasOwnProperty("height")&&this.options.canvasHeight&&(s.height=this.options.canvasHeight),!s.hasOwnProperty("width")&&this.options.canvasWidth&&(s.width=this.options.canvasWidth),this.signaturePad.fromDataURL(i,s)}clear(){this.signaturePad.clear()}isEmpty(){return this.signaturePad.isEmpty()}off(){this.signaturePad.off()}on(){this.signaturePad.on()}set(i,s){const a=this.getCanvas();switch(i){case"canvasHeight":a.height=s;break;case"canvasWidth":a.width=s;break;default:this.signaturePad[i]=s}}beginStroke(i){this.drawStart.emit(i)}beforeUpdateStroke(i){this.drawBeforeUpdate.emit(i)}afterUpdateStroke(i){this.drawAfterUpdate.emit(i)}endStroke(i){this.drawEnd.emit(i)}getSignaturePad(){return this.signaturePad}getCanvas(){return this.elementRef.nativeElement.querySelector("canvas")}}return u.\u0275fac=function(i){return new(i||u)(_.Y36(_.SBq))},u.\u0275cmp=_.Xpm({type:u,selectors:[["signature-pad"]],inputs:{options:"options"},outputs:{drawStart:"drawStart",drawBeforeUpdate:"drawBeforeUpdate",drawAfterUpdate:"drawAfterUpdate",drawEnd:"drawEnd"},decls:1,vars:0,consts:[[1,"signature-pad-canvas"]],template:function(i,s){1&i&&_._UZ(0,"canvas",0)},styles:["[_nghost-%COMP%]{background:antiquewhite;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]   .signature-pad-canvas[_ngcontent-%COMP%]{border:1px solid gray}"]}),u})(),P=(()=>{class u{}return u.\u0275fac=function(i){return new(i||u)},u.\u0275mod=_.oAB({type:u}),u.\u0275inj=_.cJS({}),u})()}}]);