<div class="flex flex-col flex-auto md:w-220 md:min-w-220 max-h-160 -m-6 overflow-y-auto">
    <div class="flex flex-0 items-center justify-between h-16 pr-3 sm:pr-5 pl-6 sm:pl-8 bg-primary text-on-primary">
        <div class="text-lg font-medium">Daftar Hadir</div>
        <button mat-icon-button (click)="matDialogRef.close()" [tabIndex]="-1">
            <mat-icon class="text-current" [svgIcon]="'heroicons_outline:x'"></mat-icon>
        </button>
    </div>

    <!-- Card form -->
    <div class="flex flex-auto flex-wrap w-full p-6 space-y-1 overflow-y-auto">
        <div class="flex flex-col w-full">
            <div class="mt-4">
                <div class="mt-4 text-lg font-medium">{{_data.title}}</div>
                <div class="w-12 h-1 my-6 border-t-2"></div>
            </div>
            <div class="flex items-center">
                <div class="flex-auto">
                    <ng-container *ngFor="let participant of participantAttendances">
                        <mat-accordion class="w-full my-2">
                            <mat-expansion-panel>
                                <mat-expansion-panel-header class="text-md right-aligned-header">
                                    <mat-panel-title>
                                        {{participant.title}}
                                    </mat-panel-title>
                                    <mat-panel-description class="text-right">
                                        {{participant.startDate | date:'ccc, d MMM yyyy'}}
                                    </mat-panel-description>
                                </mat-expansion-panel-header>
                                <ng-container *ngFor="let activity of participant.activityGroups">

                                    <mat-accordion class="w-full my-2">
                                        <mat-expansion-panel>
                                            <mat-expansion-panel-header class="text-md right-aligned-header">
                                                <mat-panel-title>
                                                    {{activity.title}}
                                                </mat-panel-title>
                                            </mat-expansion-panel-header>
                                            <div class="relative overflow-x-auto">
                                                <table
                                                    class="w-full text-sm text-left text-gray-500 dark:text-gray-400">
                                                    <thead
                                                        class="text-xs text-gray-700 uppercase bg-gray-50 dark:bg-gray-700 dark:text-gray-400">
                                                        <tr>
                                                            <th scope="col" class="px-6 py-3">
                                                                Nama
                                                            </th>
                                                            <th scope="col" class="px-6 py-3">
                                                                Kehadiran
                                                            </th>
                                                            <th scope="col" class="px-6 py-3">
                                                                Lokasi
                                                            </th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <ng-container *ngFor="let attendance of activity.attendances">

                                                            <tr
                                                                class="bg-white border-b dark:bg-gray-800 dark:border-gray-700">
                                                                <th scope="row"
                                                                    class="px-6 py-4 font-medium text-gray-900 whitespace-nowrap dark:text-white">
                                                                    {{attendance.pnsNama}}
                                                                </th>
                                                                <td class="px-6 py-4">
                                                                    {{attendance.checkinAt}}
                                                                </td>
                                                                <td class="px-6 py-4">
                                                                    {{attendance.checkinLocation}}
                                                                </td>
                                                            </tr>
                                                        </ng-container>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </mat-expansion-panel>
                                    </mat-accordion>

                                </ng-container>
                            </mat-expansion-panel>
                        </mat-accordion>
                    </ng-container>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="flex items-center justify-end border-t px-8 py-5 bg-gray-50 dark:bg-gray-700">
    <button class="my-5" mat-flat-button [color]="'primary'" (click)="download(_data.id)">
        Unduh Kehadiran
    </button>
    <button mat-button (click)="matDialogRef.close()">
        Tutup
    </button>
</div>
